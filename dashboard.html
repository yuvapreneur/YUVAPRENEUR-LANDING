<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Caf√© Business Masterclass</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .fade-in-up {
      animation: fadeInUp 0.8s ease-out;
    }
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body class="min-h-screen bg-white text-gray-900 p-4">
  <!-- Navigation -->
  <nav class="bg-white shadow-lg p-4 mb-8 rounded-xl border border-gray-200">
    <div class="max-w-7xl mx-auto flex justify-between items-center">
      <div class="text-2xl font-bold text-purple-600">‚òï Caf√© Business Masterclass</div>
             <div class="space-x-4" id="navigationLinks">
         <a href="index.html" class="text-gray-600 hover:text-purple-600 transition-colors">Home</a>
         <a href="bonuses.html" class="text-gray-600 hover:text-purple-600 transition-colors">Bonuses</a>
         <a href="buy.html" class="text-gray-600 hover:text-purple-600 transition-colors">Buy Course</a>
         <a href="login.html" class="text-gray-600 hover:text-purple-600 transition-colors hidden" id="loginLink">Login</a>
       </div>
    </div>
  </nav>

  <!-- User Profile Section -->
  <div class="max-w-4xl mx-auto mb-8 fade-in-up">
    <div class="bg-white shadow-lg p-6 border border-gray-200 rounded-xl">
      <h2 class="text-2xl font-bold text-gray-900 mb-4">üë§ User Profile</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label class="block text-gray-700 text-sm font-medium mb-2">Username</label>
          <div class="text-gray-900" id="username">Loading...</div>
        </div>
        <div>
          <label class="block text-gray-700 text-sm font-medium mb-2">Email</label>
          <div class="text-gray-900" id="email">Loading...</div>
        </div>
        <div>
          <label class="block text-gray-700 text-sm font-medium mb-2">Course Status</label>
          <div class="text-purple-600" id="courseStatus">Loading...</div>
        </div>
        <div>
          <label class="block text-gray-700 text-sm font-medium mb-2">Bonuses Access</label>
          <div class="text-purple-600" id="bonusCount">Loading...</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Course Access Section -->
  <div class="max-w-4xl mx-auto mb-8 fade-in-up" id="courseAccess">
    <!-- Course access status will be populated by JavaScript -->
  </div>

  <!-- Course Modules Section -->
  <div class="max-w-6xl mx-auto mb-8 fade-in-up">
    <h2 class="text-2xl font-bold text-gray-900 text-center mb-6">üìö Course Modules</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="modulesGrid">
      <!-- Modules will be populated by JavaScript -->
    </div>
  </div>

  <!-- Bonuses Section -->
  <div class="max-w-6xl mx-auto mb-8 fade-in-up">
    <h2 class="text-2xl font-bold text-gray-900 text-center mb-6">üéÅ Your Bonuses</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="bonusesGrid">
      <!-- Bonuses will be populated by JavaScript -->
    </div>
  </div>

  <script>
         // Course modules data
     const MODULES = [
       {
         number: 1,
         title: "Introduction to Caf√© Business",
         desc: "Complete foundation and overview of starting a caf√© business",
         icon: "‚òï",
         filename: "Module1 (2).pdf"
       },
       {
         number: 2,
         title: "Market Research & Location Analysis",
         desc: "Learn to identify profitable locations and understand your target market",
         icon: "üîç",
         filename: "Module 2  (1).pdf"
       },
       {
         number: 3,
         title: "Business Plan & Financial Planning",
         desc: "Create a solid business plan and financial projections",
         icon: "üìä",
         filename: "Module 3  (1).pdf"
       },
       {
         number: 4,
         title: "Legal Requirements & Licenses",
         desc: "Navigate legal requirements and obtain necessary licenses",
         icon: "‚öñÔ∏è",
         filename: "Module 4  (2).pdf"
       },
       {
         number: 5,
         title: "Kitchen Design & Equipment",
         desc: "Design efficient kitchen layouts and choose right equipment",
         icon: "üç≥",
         filename: "Module 5  (3).pdf"
       },
       {
         number: 6,
         title: "Menu Planning & Pricing Strategy",
         desc: "Create profitable menus and implement smart pricing",
         icon: "üìã",
         filename: "Module 6  (1).pdf"
       },
       {
         number: 7,
         title: "Staff Hiring & Management",
         desc: "Build and manage a high-performing team",
         icon: "üë•",
         filename: "Module 7  (2).pdf"
       },
       {
         number: 8,
         title: "Marketing & Branding",
         desc: "Develop strong brand identity and marketing strategies",
         icon: "üéØ",
         filename: "Module 8  (1).pdf"
       },
       {
         number: 9,
         title: "Customer Service Excellence",
         desc: "Deliver exceptional customer experiences",
         icon: "‚≠ê",
         filename: "Module 9  (2).pdf"
       },
       {
         number: 10,
         title: "Operations & Quality Control",
         desc: "Streamline operations and maintain quality standards",
         icon: "‚öôÔ∏è",
         filename: "Module 10  (3).pdf"
       },
       {
         number: 11,
         title: "Financial Management & Accounting",
         desc: "Manage finances, track expenses, and maximize profits",
         icon: "üí∞",
         filename: "Module 11 (4).pdf"
       },
       {
         number: 12,
         title: "Growth & Expansion Strategies",
         desc: "Scale your business and explore new opportunities",
         icon: "üöÄ",
         filename: "Module 12 (4).pdf"
       }
     ];

    // Bonus data
    const BONUSES = [
      { sku: "bonus-menu-psych", title: "Caf√© Menu Psychology Blueprint", desc: "Design menus that increase average order value and customer satisfaction." },
      { sku: "bonus-festival", title: "Festival & Seasonal Marketing Guide", desc: "Ready-to-use ideas & creatives to boost festive sales." },
      { sku: "bonus-loyalty", title: "How to Create a Caf√© Loyalty Program", desc: "Step-by-step template for a loyalty program that brings repeat customers." },
      { sku: "bonus-photo", title: "Photography Cheat Sheet", desc: "Quick setups for mouth-watering food & caf√© photos (phone ready)." }
    ];

    // Load user profile
    function loadUserProfile() {
      // Check if user is enrolled
      const enrollmentData = localStorage.getItem('userEnrollment');
      
      if (enrollmentData) {
        try {
          const userData = JSON.parse(enrollmentData);
          
          // Show enrolled user data
          document.getElementById('username').textContent = userData.name || 'Enrolled User';
          document.getElementById('email').textContent = userData.email || 'user@example.com';
          
          if (userData.status === 'enrolled' && userData.courseAccess === 'full') {
            document.getElementById('courseStatus').textContent = '‚úÖ Fully Enrolled';
            document.getElementById('bonusCount').textContent = '4 (All Bonuses Included)';
            
            // Update course access to show enrolled status
            updateCourseAccessForEnrolledUser();
          } else if (userData.status === 'pending_payment') {
            document.getElementById('courseStatus').textContent = '‚è≥ Payment Pending';
            document.getElementById('bonusCount').textContent = '0 (Complete Payment Required)';
            loadCourseAccess();
          } else {
            document.getElementById('courseStatus').textContent = '‚ùå Payment Failed';
            document.getElementById('bonusCount').textContent = '0 (Payment Required)';
            loadCourseAccess();
          }
          
        } catch (error) {
          console.error('Error loading enrollment data:', error);
          loadDefaultProfile();
        }
      } else {
        loadDefaultProfile();
      }
    }
    
    // Load default profile for non-enrolled users
    function loadDefaultProfile() {
      document.getElementById('username').textContent = 'abhijjetwa';
      document.getElementById('email').textContent = 'yuvapreneur@gmail.com';
      document.getElementById('courseStatus').textContent = '‚ùå Not Enrolled';
      document.getElementById('bonusCount').textContent = '0';
    }
    
    // Update course access for enrolled users
    function updateCourseAccessForEnrolledUser() {
      const courseAccessDiv = document.getElementById('courseAccess');
      courseAccessDiv.innerHTML = `
        <div class="bg-white shadow-lg p-6 border border-gray-200 rounded-xl">
          <div class="bg-green-50 border border-green-200 rounded-lg p-4">
            <h3 class="text-lg font-semibold text-green-800 mb-2">üéâ Course Access Granted!</h3>
            <p class="text-green-700 mb-4">Welcome to the Caf√© Business Masterclass! You now have access to all 12 modules and 4 exclusive bonuses.</p>
            <div class="text-center mt-6">
              <a href="#modules" class="inline-block bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg text-lg font-semibold transition-colors transform hover:scale-105">
                üìö Start Learning
              </a>
            </div>
          </div>
        </div>
      `;
    }

    // Load course access status
    function loadCourseAccess() {
      const courseAccessDiv = document.getElementById('courseAccess');
      const enrollmentData = localStorage.getItem('userEnrollment');
      
      if (enrollmentData) {
        try {
          const userData = JSON.parse(enrollmentData);
          
          if (userData.status === 'pending_payment') {
            // Show payment pending status
            courseAccessDiv.innerHTML = `
              <div class="bg-white shadow-lg p-6 border border-gray-200 rounded-xl">
                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                  <h3 class="text-lg font-semibold text-yellow-800 mb-2">‚è≥ Payment Pending</h3>
                  <p class="text-yellow-700 mb-4">Your enrollment is pending. Please complete the payment to get full course access.</p>
                  <div class="text-center mt-6">
                    <a href="index.html" class="inline-block bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-3 rounded-lg text-lg font-semibold transition-colors transform hover:scale-105">
                      üí≥ Complete Payment
                    </a>
                  </div>
                </div>
              </div>
            `;
          } else if (userData.status === 'payment_failed') {
            // Show payment failed status
            courseAccessDiv.innerHTML = `
              <div class="bg-white shadow-lg p-6 border border-gray-200 rounded-xl">
                <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                  <h3 class="text-lg font-semibold text-red-800 mb-2">‚ùå Payment Failed</h3>
                  <p class="text-red-700 mb-4">Your payment was not successful. Please try again to get course access.</p>
                  <div class="text-center mt-6">
                    <a href="index.html" class="inline-block bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg text-lg font-semibold transition-colors transform hover:scale-105">
                      üîÑ Retry Payment
                    </a>
                  </div>
                </div>
              </div>
            `;
          } else {
            // Show not enrolled status
            courseAccessDiv.innerHTML = `
              <div class="bg-white shadow-lg p-6 border border-gray-200 rounded-xl">
                <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                  <h3 class="text-lg font-semibold text-purple-800 mb-2">‚ö†Ô∏è Course Not Enrolled</h3>
                  <p class="text-purple-700 mb-4">You need to enroll to access all 12 course modules and 4 exclusive bonuses.</p>
                  <div class="text-center mt-6">
                    <a href="index.html" class="inline-block bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg text-lg font-semibold transition-colors transform hover:scale-105">
                      üöÄ Enroll Now
                    </a>
                  </div>
                </div>
              </div>
            `;
          }
        } catch (error) {
          console.error('Error loading course access:', error);
          // Show default not enrolled status
          courseAccessDiv.innerHTML = `
            <div class="bg-white shadow-lg p-6 border border-gray-200 rounded-xl">
              <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                <h3 class="text-lg font-semibold text-purple-800 mb-2">‚ö†Ô∏è Course Not Enrolled</h3>
                <p class="text-purple-700 mb-4">You need to enroll to access all 12 course modules and 4 exclusive bonuses.</p>
                <div class="text-center mt-6">
                  <a href="index.html" class="inline-block bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg text-lg font-semibold transition-colors transform hover:scale-105">
                    üöÄ Enroll Now
                  </a>
                </div>
              </div>
            </div>
          `;
        }
      } else {
        // Show not enrolled status
        courseAccessDiv.innerHTML = `
          <div class="bg-white shadow-lg p-6 border border-gray-200 rounded-xl">
            <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
              <h3 class="text-lg font-semibold text-purple-800 mb-2">‚ö†Ô∏è Course Not Enrolled</h3>
              <p class="text-purple-700 mb-4">You need to enroll to access all 12 course modules and 4 exclusive bonuses.</p>
              <div class="text-center mt-6">
                <a href="index.html" class="inline-block bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg text-lg font-semibold transition-colors transform hover:scale-105">
                  üöÄ Enroll Now
                </a>
              </div>
            </div>
          </div>
        `;
      }
    }

         // Load course modules
     function loadCourseModules() {
       const modulesGrid = document.getElementById('modulesGrid');
       const enrollmentData = localStorage.getItem('userEnrollment');
       
       // Check if user is fully enrolled
       const isFullyEnrolled = enrollmentData && (() => {
         try {
           const userData = JSON.parse(enrollmentData);
           return userData.status === 'enrolled' && userData.courseAccess === 'full';
         } catch (error) {
           return false;
         }
       })();
       
       MODULES.forEach(module => {
         const moduleCard = document.createElement('div');
         moduleCard.className = 'bg-white shadow-lg p-4 border border-gray-200 rounded-xl';
         
         if (isFullyEnrolled) {
           // Show unlocked modules with download option for enrolled users
           moduleCard.innerHTML = `
             <div class="flex items-center justify-between mb-3">
               <div class="text-3xl">${module.icon}</div>
               <div class="bg-green-600 text-white text-sm font-bold px-3 py-1 rounded-full">Module ${module.number}</div>
             </div>
             <h3 class="text-lg font-semibold text-gray-900 mb-2">${module.title}</h3>
             <p class="text-gray-600 text-sm mb-4">${module.desc}</p>
             <div class="text-center space-y-2">
               <div class="text-xs text-green-600">‚úÖ Unlocked - Full Access</div>
               <a href="download.html?file=${encodeURIComponent(module.filename)}&title=${encodeURIComponent(module.title)}" 
                  class="inline-block bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm transition-colors w-full text-center">
                 üì• Download Module ${module.number}
               </a>
             </div>
           `;
         } else {
           // Show locked modules for non-enrolled users
           moduleCard.innerHTML = `
             <div class="flex items-center justify-between mb-3">
               <div class="text-3xl">${module.icon}</div>
               <div class="bg-purple-600 text-white text-sm font-bold px-3 py-1 rounded-full">Module ${module.number}</div>
             </div>
             <h3 class="text-lg font-semibold text-gray-900 mb-2">${module.title}</h3>
             <p class="text-gray-600 text-sm mb-4">${module.desc}</p>
             <div class="text-center">
               <button class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded text-sm transition-colors w-full">
                 üîí Enroll to Unlock
               </button>
             </div>
           `;
         }
         
         modulesGrid.appendChild(moduleCard);
       });
     }

    // Load user bonuses
    function loadUserBonuses() {
      const bonusesGrid = document.getElementById('bonusesGrid');
      const enrollmentData = localStorage.getItem('userEnrollment');
      
      // Check if user is fully enrolled
      const isFullyEnrolled = enrollmentData && (() => {
        try {
          const userData = JSON.parse(enrollmentData);
          return userData.status === 'enrolled' && userData.courseAccess === 'full';
        } catch (error) {
          return false;
        }
      })();
      
      if (isFullyEnrolled) {
        // Show all bonuses as accessible for enrolled users
        bonusesGrid.innerHTML = `
          <div class="bonus-card bg-white shadow-lg p-6 border border-gray-200 rounded-xl">
            <div class="text-2xl mb-4">üéÅ</div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Caf√© Menu Psychology Blueprint</h3>
            <p class="text-gray-600 text-sm mb-4">Design menus that increase average order value and customer satisfaction.</p>
            <div class="space-y-2">
              <div class="text-xs text-green-600">‚úÖ Included with Enrollment</div>
              <a href="download.html?file=bonus-menu-psych.pdf&title=Caf√© Menu Psychology Blueprint" class="inline-block bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded text-sm transition-colors w-full text-center">
                üì• Download Bonus
              </a>
            </div>
          </div>
          
          <div class="bonus-card bg-white shadow-lg p-6 border border-gray-200 rounded-xl">
            <div class="text-2xl mb-4">üéÅ</div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Festival & Seasonal Marketing Guide</h3>
            <p class="text-gray-600 text-sm mb-4">Ready-to-use ideas & creatives to boost festive sales.</p>
            <div class="space-y-2">
              <div class="text-xs text-green-600">‚úÖ Included with Enrollment</div>
              <a href="download.html?file=bonus-festival.pdf&title=Festival & Seasonal Marketing Guide" class="inline-block bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded text-sm transition-colors w-full text-center">
                üì• Download Bonus
              </a>
            </div>
          </div>
          
          <div class="bonus-card bg-white shadow-lg p-6 border border-gray-200 rounded-xl">
            <div class="text-2xl mb-4">üéÅ</div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">How to Create a Caf√© Loyalty Program</h3>
            <p class="text-gray-600 text-sm mb-4">Step-by-step template for a loyalty program that brings repeat customers.</p>
            <div class="space-y-2">
              <div class="text-xs text-green-600">‚úÖ Included with Enrollment</div>
              <a href="download.html?file=bonus-loyalty.pdf&title=How to Create a Caf√© Loyalty Program" class="inline-block bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded text-sm transition-colors w-full text-center">
                üì• Download Bonus
              </a>
            </div>
          </div>
          
          <div class="bonus-card bg-white shadow-lg p-6 border border-gray-200 rounded-xl">
            <div class="text-2xl mb-4">üéÅ</div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Photography Cheat Sheet</h3>
            <p class="text-gray-600 text-sm mb-4">Quick setups for mouth-watering food & caf√© photos (phone ready).</p>
            <div class="space-y-2">
              <div class="text-xs text-green-600">‚úÖ Included with Enrollment</div>
              <a href="download.html?file=bonus-photo.pdf&title=Photography Cheat Sheet" class="inline-block bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded text-sm transition-colors w-full text-center">
                üì• Download Bonus
              </a>
            </div>
          </div>
        `;
      } else {
        // Show locked bonuses for non-enrolled users
        bonusesGrid.innerHTML = `
          <div class="bonus-card bg-white shadow-lg p-6 border border-gray-200 rounded-xl">
            <div class="text-2xl mb-4">üéÅ</div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Caf√© Menu Psychology Blueprint</h3>
            <p class="text-gray-600 text-sm mb-4">Design menus that increase average order value and customer satisfaction.</p>
            <div class="space-y-2">
              <div class="text-xs text-purple-600">üîí Enroll to Access</div>
              <a href="index.html" class="inline-block bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded text-sm transition-colors w-full text-center">
                üöÄ Enroll Now
              </a>
            </div>
          </div>
          
          <div class="bonus-card bg-white shadow-lg p-6 border border-gray-200 rounded-xl">
            <div class="text-2xl mb-4">üéÅ</div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Festival & Seasonal Marketing Guide</h3>
            <p class="text-gray-600 text-sm mb-4">Ready-to-use ideas & creatives to boost festive sales.</p>
            <div class="space-y-2">
              <div class="text-xs text-purple-600">üîí Enroll to Access</div>
              <a href="index.html" class="inline-block bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded text-sm transition-colors w-full text-center">
                üöÄ Enroll Now
              </a>
            </div>
          </div>
          
          <div class="bonus-card bg-white shadow-lg p-6 border border-gray-200 rounded-xl">
            <div class="text-2xl mb-4">üéÅ</div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">How to Create a Caf√© Loyalty Program</h3>
            <p class="text-gray-600 text-sm mb-4">Step-by-step template for a loyalty program that brings repeat customers.</p>
            <div class="space-y-2">
              <div class="text-xs text-purple-600">üîí Enroll to Access</div>
              <a href="index.html" class="inline-block bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded text-sm transition-colors w-full text-center">
                üöÄ Enroll Now
              </a>
            </div>
          </div>
          
          <div class="bonus-card bg-white shadow-lg p-6 border border-gray-200 rounded-xl">
            <div class="text-2xl mb-4">üéÅ</div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Photography Cheat Sheet</h3>
            <p class="text-gray-600 text-sm mb-4">Quick setups for mouth-watering food & caf√© photos (phone ready).</p>
            <div class="space-y-2">
              <div class="text-xs text-purple-600">üîí Enroll to Access</div>
              <a href="index.html" class="inline-block bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded text-sm transition-colors w-full text-center">
                üöÄ Enroll Now
              </a>
            </div>
          </div>
        `;
      }
    }

    // Initialize dashboard
    document.addEventListener('DOMContentLoaded', function() {
      loadUserProfile();
      loadCourseAccess();
      loadCourseModules();
      loadUserBonuses();
      checkEnrollmentStatus();
    });
    
    // Check enrollment status and show/hide login link
    function checkEnrollmentStatus() {
      const enrollmentData = localStorage.getItem('userEnrollment');
      const loginLink = document.getElementById('loginLink');
      
      if (enrollmentData) {
        try {
          const userData = JSON.parse(enrollmentData);
          // Show login link if user has any enrollment data (pending, enrolled, or failed)
          if (userData.status) {
            loginLink.classList.remove('hidden');
            console.log('User has enrollment data, showing login link');
          }
        } catch (error) {
          console.error('Error checking enrollment status:', error);
        }
      } else {
        // Hide login link for new users
        loginLink.classList.add('hidden');
        console.log('New user, hiding login link');
      }
    }
  </script>
</body>
</html>
